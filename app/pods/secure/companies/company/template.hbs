{{#with @model.product as |product|}}
  <Modal @id="product">
    {{#if product.image}}
      <Image::Responsive
        @path={{product.image.path}}
        @sizes={{product.image.sizes}}
        @formats={{product.image.formats}}
      />
    {{/if}}

    <h1>{{product.name}}</h1>

    <h2>Properties</h2>

    <Field::String
      @label='Name'
      @record={{product}}
      @attribute='name'
      @disabled='true'
    />

    <Field::OneToMany
      @label='Family'
      @record={{product}}
      @relation='productFamily'
      @filterOn='namePlural'
    />

    <h2>Database</h2>

    <Field::String
      @label='Database ID'
      @record={{product}}
      @attribute='id'
      @disabled='true'
    />
  </Modal>
{{/with}}

{{#with @model.company as |company|}}
  <Modal @id='company'>

    <h1>{{company.businessName}}</h1>

    <h2>Name</h2>

    <Field::String
      @label='Brand name'
      @record={{company}}
      @attribute='businessName'
    />

    <Field::String
      @label='Legal name'
      @record={{company}}
      @attribute='legalName'
    />

    <h2>Address</h2>

    <Field::OneToMany
      @label='Country'
      @record={{company}}
      @relation='country'
      @filterOn='nameEnglish'
    />

    <Field::String
      @label='Address'
      @record={{company}}
      @attribute='address'
      @multiline='true'
    />

    <Field::String
      @label='Longitude'
      @record={{company}}
      @attribute='longitude'
    />

    <Field::String
      @label='Latitude'
      @record={{company}}
      @attribute='latitude'
    />

    <h2>Contact</h2>

    <Field::String
      @label='Phone'
      @record={{company}}
      @attribute='phone'
    />

    <Field::String
      @label='Fax'
      @record={{company}}
      @attribute='fax'
    />

    <Field::String
      @label='Website'
      @record={{company}}
      @attribute='website'
    />

    <Field::String
      @label='Emails'
      @legend='For multiple emails, use commas for seperation.'
      @record={{company}}
      @attribute='emails'
    />

    {{!-- <Field::String
      @label='Email for general enquiries'
      @type='email'
      @record={{company}}
      @attribute='emailGeneral'
    />

    <Field::String
      @label='Email for technical support'
      @type='email'
      @record={{company}}
      @attribute='emailSupport'
    />

    <Field::String
      @label='Email for placing orders'
      @type='email'
      @record={{company}}
      @attribute='emailOrders'
    />

    <Field::String
      @label='Email for accounting enquiries'
      @type='email'
      @record={{company}}
      @attribute='emailAccounting'
    /> --}}

    <h2>Relations</h2>

    <Field::ManyToMany
      @label="Members"
      @legend="Search by first name."
      @baseRecord={{company}}
      @baseModel="company"
      @baseLabel="companyMembers"
      @joinModel="company-member"
      @targetModel="person"
      @targetLabel="fullName"
      @targetFilter="firstName"
      @targetRoute='secure.people.person'
    />

    <Field::ManyToMany
      @label="Markets"
      @legend="The countries in which this company operates and sells."
      @baseRecord={{company}}
      @baseModel="company"
      @baseLabel="companyMarkets"
      @joinModel="company-market"
      @targetModel="country"
      @targetLabel="nameEnglish"
      @targetFilter="nameEnglish"
      @targetRoute='secure.people.person'
    />

    <h2>Visibility</h2>

    <p>To make companies visible on the <a
        href='https://app.interflux.com/en/contact'
        target='_blank'
        rel='noopener noreferrer'
      >contact page</a> of our website, use the checkbox below.</p>

    <Field::Boolean
      @record={{company}}
      @attribute='public'
    >
      <label>Show on website</label>
    </Field::Boolean>

    {{#if company.public}}
      <Field::String
        @label='Rank'
        @legend='Companies are sorted alphabetically on our website, except for those with a rank. Those with a rank move to the top of the list. Enter a number to sort the ranked companies. Leave blank for alphabetical sort.'
        @record={{company}}
        @attribute='order'
      />
    {{/if}}

    <h2>Database</h2>

    <Field::String
      @label='Database ID'
      @record={{company}}
      @attribute='id'
      @disabled={{true}}
    />
  </Modal>

{{/with}}